# vim: filetype=sh

if [ `uname` != Darwin ]; then
    return 0
fi

## Homebrew
if [ -f ~/.brew_api_token ];then
    source ~/.brew_api_token
fi

PHPVERSION=$(php -r 'echo phpversion();');
BREWPATH=$PATH
BREWPATH=${BREWPATH/${HOME}\/\.pyenv\/shims:/}
BREWPATH=${BREWPATH/${HOME}\/.phpbrew\/php\/php-${PHPVERSION}\/bin/}
alias brew="env PATH=${BREWPATH} brew"

export PGDATA=/usr/local/var/postgres
alias postgres='postgres -D /usr/local/var/postgres'

alias ls='ls -G'

commands=(awk sed)
for c in ${commands[@]}; do
    if `type g$c > /dev/null 2>&1`; then
        alias $c=g$c
    fi
done

alias ssid=$'/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I | awk \'/ SSID/ {print substr($0, index($0, $2))}\''
if [ $(command -v networksetup) ]; then
    function wifireset {
        ssid=$(ssid)
        networksetup -setairportpower en0 off
        echo 'Re-enabling Wi-Fi...'
        networksetup -setairportpower en0 on
        echo "Reconnecting ${ssid}..."
        networksetup -setairportnetwork en0 "$ssid"
        echo 'Done.'
    }
fi
bind "set completion-ignore-case on"
