---
- hosts: localhost # hostname
  sudo: no

  tasks:

    - name: Taps
      homebrew_tap: tap={{item}}
      with_items:
          - homebrew/versions
          - caskroom/cask
          - caskroom/versions
          - homebrew/php

    - name: Install GUI Applications
      homebrew_cask: name={{item}}
      with_items:
          - dropbox
          - owncloud
          - iterm2
          - google-japanese-ime
          - bettertouchtool
          - menumeters 
          - karabiner
          - evernote 
          - macvim-kaoriya
          - flash
          - java
          - cyberduck
          - virtualbox
          - vagrant
          - mysqlworkbench
          - bartender
          - vlc
          - rescuetime
          - cocoarestclient
          - adobe-air
          - cacoo-ninja
          - mendeley-desktop
          - github
          - day-o
          - onyx
          - heroku-toolbelt
          - xquartz
          - firefox
          - google-chrome
          - goofy
          - libreoffice
          - kobito
          - duet
          - kindle
          - lastfm
          # - recordit
          # - mactex

    - name: Install Basic Components
      homebrew: name={{item}} 
      with_items:
          - vim
          - cloog
          - gcc
          - pwgen
          - tree
          - git
          - bash
          - trash
          - wget
          - imagemagick
          - ghostscript
          - bash-completion
          - watch
          - nkf
          - nmap
          - awscli
          - ansible
          - postgresql

    - name: Install PHPs
      homebrew: name={{item}}
      with_items:
          - php56
          - composer
          - php56-mcrypt

    - name: Install Rubys
      homebrew: name={{item}}
      with_items: 
          - ruby-build
          - rbenv

    # TODO: rbenv install 2.2.1をする
    # - name: Check Ruby version
    #   shell: "ruby -v | grep 2.1.5"
    #   ignore_errors: True
    #   register: result
    # - name: Install Ruby
    #   shell: "rbenv install 2.1.5 && rbenv global 2.1.5 && rbenv rehash"
    #   when: result|failed


    - name: Install Gems
      gem: name={{item}} user_install=false
      # user_install=falseで~/.rbenv/...にインストールされる
      with_items:
          - rails
          - bundler
          - chef
          - chef-zero
          - knife-solo
          - berkshelf
          - kitchen-vagrant
          - test-kitchen
          - knife-solo_data_bag
          - serverspec
          - cocoapods
          - tw
        

